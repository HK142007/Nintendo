function DynamicAudio(t){if(!(this instanceof arguments.callee))return new arguments.callee(arguments);"function"==typeof this.init&&this.init.apply(this,t&&t.callee?t:arguments)}window.AudioContext=window.AudioContext||window.webkitAudioContext,DynamicAudio.VERSION="<%= version %>",DynamicAudio.nextId=1,DynamicAudio.prototype={nextId:null,audioContext:null,flashWrapper:null,flashElement:null,init:function(t){this.id=DynamicAudio.nextId++;try{this.audioContext=new AudioContext}catch(t){}},write:function(t){if(null!==this.audioContext)this.webAudioWrite(t);else if(null!==this.flashElement){for(var i=new Array(t.length),e=t.length-1;0!==e;e--)i[e]=this.floatToIntSample(t[e]);this.flashElement.write(i.join(" "))}},writeInt:function(t){null!==this.audioContext?this.webAudioWrite(t,this.intToFloatSample):null!==this.flashElement&&this.flashElement.write(t.join(" "))},webAudioWrite:function(t,i){var e=this.audioContext.createBuffer(2,t.length,this.audioContext.sampleRate),n=e.getChannelData(0),o=e.getChannelData(1),l=0;if(i)for(var a=0;a<t.length;a+=2)n[l]=i(t[a]),o[l]=i(t[a+1]),l++;else for(a=0;a<t.length;a+=2)n[l]=t[a],o[l]=t[a+1],l++;var u=this.audioContext.createBufferSource();u.buffer=e,u.connect(this.audioContext.destination),u.start()},intToFloatSample:function(t){return t/32768}};